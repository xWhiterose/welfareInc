import { useEffect, useRef } from 'react';

interface SocialMarqueeProps {
  className?: string;
}

export default function SocialMarquee({ className = "" }: SocialMarqueeProps) {
  const marqueeContentRef = useRef<HTMLUListElement>(null);

  const socialLogos = [
    {
      id: 'tiktok',
      svg: `<svg width="300" height="100" viewBox="0 0 300 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M92.2566 42.8082V56.1987C92.2566 62.8869 86.8153 68.3291 80.128 68.3354C77.6397 68.3374 75.2118 67.5695 73.1772 66.1371C71.0829 63.8975 69.9185 60.9453 69.9199 57.879C69.9199 51.287 75.2064 45.9106 81.762 45.7575V50.9194C81.2335 50.7514 80.6825 50.665 80.128 50.6631C78.8893 50.6625 77.6862 51.0774 76.7111 51.8413C75.736 52.6052 75.0453 53.674 74.749 54.8582C74.4527 56.0424 74.5658 57.2884 75.0729 58.408C75.58 59.5277 76.4515 60.4636 77.5417 61.0704C78.6318 61.6772 79.8844 61.9232 81.1203 61.7724C82.3562 61.6216 83.5117 61.0821 84.419 60.2374C85.3263 59.3926 85.9399 58.2866 86.1729 57.0781C86.4059 55.8697 86.2468 54.6195 85.7161 53.5016C85.1854 52.3836 84.3103 51.4542 83.2126 50.8395C82.115 50.2249 80.8491 49.9578 79.5892 50.072V45.7575C83.7515 45.9106 87.7036 47.5546 90.6297 50.3582C93.5558 53.1618 95.2566 56.9249 95.2566 60.9354V73.3291H100V28.6709H95.2566V38.4215C92.8203 35.8291 89.6297 34.0863 86.1203 33.4722V28.6709H81.3769V38.4722C77.8675 39.0863 74.6769 40.8291 72.2406 43.4215V28.6709H67.4972V73.3291H72.2406V60.9354C72.2406 56.9249 73.9414 53.1618 76.8675 50.3582C79.7936 47.5546 83.7457 45.9106 87.908 45.7575V50.072C86.6481 49.9578 85.3822 50.2249 84.2846 50.8395C83.1869 51.4542 82.3118 52.3836 81.7811 53.5016C81.2504 54.6195 81.0913 55.8697 81.3243 57.0781C81.5573 58.2866 82.1709 59.3926 83.0782 60.2374C83.9855 61.0821 85.141 61.6216 86.3769 61.7724C87.6128 61.9232 88.8654 61.6772 89.9555 61.0704C91.0457 60.4636 91.9172 59.5277 92.4243 58.408C92.9314 57.2884 93.0445 56.0424 92.7482 54.8582C92.4519 53.674 91.7612 52.6052 90.7861 51.8413C89.811 51.0774 88.6079 50.6625 87.3692 50.6631C86.8147 50.665 86.2637 50.7514 85.7352 50.9194V45.7575C92.2908 45.9106 97.5773 51.287 97.5773 57.879C97.5787 60.9453 96.4143 63.8975 94.32 66.1371C92.2854 67.5695 89.8575 68.3374 87.3692 68.3354C80.6819 68.3291 75.2406 62.8869 75.2406 56.1987V42.8082H70.497V28.6709H65.7536V73.3291H70.497V60.9354C70.497 56.9249 72.1978 53.1618 75.1239 50.3582C78.05 47.5546 82.0021 45.9106 86.1644 45.7575V50.072C84.9045 49.9578 83.6386 50.2249 82.541 50.8395C81.4433 51.4542 80.5682 52.3836 80.0375 53.5016C79.5068 54.6195 79.3477 55.8697 79.5807 57.0781C79.8137 58.2866 80.4273 59.3926 81.3346 60.2374C82.2419 61.0821 83.3974 61.6216 84.6333 61.7724C85.8692 61.9232 87.1218 61.6772 88.2119 61.0704C89.3021 60.4636 90.1736 59.5277 90.6807 58.408C91.1878 57.2884 91.3009 56.0424 91.0046 54.8582C90.7083 53.674 90.0176 52.6052 89.0425 51.8413C88.0674 51.0774 86.8643 50.6625 85.6256 50.6631C85.0711 50.665 84.5201 50.7514 83.9916 50.9194V45.7575C90.5472 45.9106 95.8337 51.287 95.8337 57.879C95.8351 60.9453 94.6707 63.8975 92.5764 66.1371C90.5418 67.5695 88.1139 68.3374 85.6256 68.3354C78.9383 68.3291 73.497 62.8869 73.497V56.1987V42.8082H68.7536V28.6709H64.0102V73.3291H68.7536V60.9354C68.7536 56.9249 70.4544 53.1618 73.3805 50.3582C76.3066 47.5546 80.2587 45.9106 84.421 45.7575V50.072C83.1611 49.9578 81.8952 50.2249 80.7976 50.8395C79.6999 51.4542 78.8248 52.3836 78.2941 53.5016C77.7634 54.6195 77.6043 55.8697 77.8373 57.0781C78.0703 58.2866 78.6839 59.3926 79.5912 60.2374C80.4985 61.0821 81.654 61.6216 82.8899 61.7724C84.1258 61.9232 85.3784 61.6772 86.4685 61.0704C87.5587 60.4636 88.4302 59.5277 88.9373 58.408C89.4444 57.2884 89.5575 56.0424 89.2612 54.8582C88.9649 53.674 88.2742 52.6052 87.2991 51.8413C86.324 51.0774 85.1209 50.6625 83.8822 50.6631C83.3277 50.665 82.7767 50.7514 82.2482 50.9194V45.7575C88.8038 45.9106 94.0903 51.287 94.0903 57.879C94.0917 60.9453 92.9273 63.8975 90.833 66.1371C88.7984 67.5695 86.3705 68.3374 83.8822 68.3354C77.1949 68.3291 71.7536 62.8869 71.7536 56.1987V42.8082H67.0102V28.6709H62.2668V73.3291H67.0102V60.9354C67.0102 56.9249 68.711 53.1618 71.6371 50.3582C74.5632 47.5546 78.5153 45.9106 82.6776 45.7575V50.072C81.4177 49.9578 80.1518 50.2249 79.0542 50.8395C77.9565 51.4542 77.0814 52.3836 76.5507 53.5016C76.02 54.6195 75.8609 55.8697 76.0939 57.0781C76.3269 58.2866 76.9405 59.3926 77.8478 60.2374C78.7551 61.0821 79.9106 61.6216 81.1465 61.7724C82.3824 61.9232 83.635 61.6772 84.7251 61.0704C85.8153 60.4636 86.6868 59.5277 87.1939 58.408C87.701 57.2884 87.8141 56.0424 87.5178 54.8582C87.2215 53.674 86.5308 52.6052 85.5557 51.8413C84.5806 51.0774 83.3775 50.6625 82.1388 50.6631C81.5843 50.665 81.0333 50.7514 80.5048 50.9194V45.7575C87.0604 45.9106 92.3469 51.287 92.3469 57.879C92.3483 60.9453 91.1839 63.8975 89.0896 66.1371C87.055 67.5695 84.6271 68.3374 82.1388 68.3354C75.4515 68.3291 70.0102 62.8869 70.0102 56.1987V42.8082Z" fill="#ff0050"/></svg>`
    },
    {
      id: 'facebook',
      svg: `<svg width="300" height="100" viewBox="0 0 300 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M60.061 37.7285C60.061 35.3489 60.7643 34.2701 63.1968 34.2701L66.6452 34.2776V28.2757C65.1398 28.0924 63.6243 28.0024 62.1078 28.006C54.8708 28.006 52.2769 31.4039 52.2769 37.8369V41.6761H47.0312V48.0536H52.2769V67.408H60.0635V48.0536H65.899L66.5494 41.6761H60.061V37.7285Z" fill="#1877F2"/></svg>`
    },
    {
      id: 'whatsapp',
      svg: `<svg width="300" height="100" viewBox="0 0 300 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M77.9818 26C65.9649 26 56.1834 35.7803 56.1783 47.8012C56.1771 51.6437 57.1813 55.3945 59.0892 58.7005L55.9961 70L67.5542 66.968C70.7391 68.7051 74.3241 69.6202 77.9729 69.6215H77.9818C89.9975 69.6215 99.779 59.8399 99.7841 47.819C99.7866 41.9934 97.5206 36.5157 93.4041 32.3953C89.2876 28.2737 83.8138 26.0025 77.9818 26Z" fill="#25D366"/></svg>`
    },
    {
      id: 'netflix',
      svg: `<svg width="300" height="100" viewBox="0 0 300 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M180.822 27.9902H172.985V71.8183C180.107 72.0633 187.199 72.4226 194.262 72.8935V65.1719C189.794 64.8739 185.314 64.6213 180.822 64.4121V27.9902Z" fill="#E50914"/></svg>`
    },
    {
      id: 'discord',
      svg: `<svg width="300" height="100" viewBox="0 0 300 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M71.2089 28.501C75.3451 29.2008 79.3718 30.4396 83.1861 32.1859C89.7569 41.7932 93.0218 52.6288 91.8163 65.1311C87.3765 68.4139 82.4041 70.907 77.1176 72.501C75.9272 70.9037 74.8747 69.2081 73.9714 67.4325Z" fill="#5865F2"/></svg>`
    }
  ];

  useEffect(() => {
    const marqueeContent = marqueeContentRef.current;
    if (!marqueeContent) return;

    // Clone des éléments pour l'effet continu
    const children = Array.from(marqueeContent.children);
    children.forEach(child => {
      const clone = child.cloneNode(true);
      marqueeContent.appendChild(clone);
    });

    // Définition des propriétés CSS dynamiques
    document.documentElement.style.setProperty('--social-marquee-elements', socialLogos.length.toString());
  }, []);

  return (
    <div className={`social-marquee-container ${className}`}>
      <div className="social-marquee">
        <ul className="social-marquee-content" ref={marqueeContentRef}>
          {socialLogos.map((logo, index) => (
            <li key={`${logo.id}-${index}`}>
              <div 
                dangerouslySetInnerHTML={{ __html: logo.svg }}
                className="marquee-logo"
              />
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
}